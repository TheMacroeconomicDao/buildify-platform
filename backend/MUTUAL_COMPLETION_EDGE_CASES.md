# EDGE CASES –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –≤–∑–∞–∏–º–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤

## üéØ –û–°–ù–û–í–ù–´–ï –°–¶–ï–ù–ê–†–ò–ò

### 1. –ù–û–†–ú–ê–õ–¨–ù–´–ô FLOW
1. **–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç** ‚Üí `AwaitingConfirmation` + `completed_by_executor=true`
2. **–ó–∞–∫–∞–∑—á–∏–∫ –∑–∞–≤–µ—Ä—à–∞–µ—Ç** ‚Üí `Completed` + `completed_by_customer=true` ‚Üí **–ê–†–•–ò–í**

### 2. –û–ë–†–ê–¢–ù–´–ô FLOW  
1. **–ó–∞–∫–∞–∑—á–∏–∫ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –ø–µ—Ä–≤—ã–º** ‚Üí `AwaitingConfirmation` + `completed_by_customer=true`
2. **–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç** ‚Üí `Completed` + `completed_by_executor=true` ‚Üí **–ê–†–•–ò–í**

## üö® EDGE CASES

### 3. –û–¢–ú–ï–ù–ê –ü–û–°–õ–ï –ß–ê–°–¢–ò–ß–ù–û–ì–û –ó–ê–í–ï–†–®–ï–ù–ò–Ø
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∏–ª, –Ω–æ –∑–∞–∫–∞–∑—á–∏–∫ –æ—Ç–º–µ–Ω—è–µ—Ç –∑–∞–∫–∞–∑
**–†–µ—à–µ–Ω–∏–µ:** 
- –°–±—Ä–æ—Å–∏—Ç—å —Ñ–ª–∞–≥–∏ `completed_by_*` –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ
- –°—Ç–∞—Ç—É—Å ‚Üí `Cancelled`

### 4. –û–¢–ö–õ–û–ù–ï–ù–ò–ï –†–ê–ë–û–¢–´ –ü–û–°–õ–ï –ó–ê–í–ï–†–®–ï–ù–ò–Ø –ò–°–ü–û–õ–ù–ò–¢–ï–õ–Ø
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∏–ª, –∑–∞–∫–∞–∑—á–∏–∫ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç —Ä–∞–±–æ—Ç—É
**–†–µ—à–µ–Ω–∏–µ:**
- –°–±—Ä–æ—Å–∏—Ç—å `completed_by_executor = false`  
- –°—Ç–∞—Ç—É—Å ‚Üí `Rejected`
- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Å–Ω–æ–≤–∞

### 5. –ü–û–í–¢–û–†–ù–û–ï –ó–ê–í–ï–†–®–ï–ù–ò–ï
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "Complete" –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
**–†–µ—à–µ–Ω–∏–µ:** 
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ñ–ª–∞–≥ `completed_by_*` –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- –ï—Å–ª–∏ —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

### 6. –°–ú–ï–ù–ê –ò–°–ü–û–õ–ù–ò–¢–ï–õ–Ø –ü–û–°–õ–ï –ß–ê–°–¢–ò–ß–ù–û–ì–û –ó–ê–í–ï–†–®–ï–ù–ò–Ø
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ê –∑–∞–≤–µ—Ä—à–∏–ª, –Ω–æ –Ω–∞–∑–Ω–∞—á–∏–ª–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è –ë
**–†–µ—à–µ–Ω–∏–µ:**
- –°–±—Ä–æ—Å–∏—Ç—å `completed_by_executor = false` –ø—Ä–∏ —Å–º–µ–Ω–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
- –û–±–Ω—É–ª–∏—Ç—å `executor_completed_at`

### 7. –ó–ê–ö–ê–ó –ë–ï–ó –ò–°–ü–û–õ–ù–ò–¢–ï–õ–Ø
**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–∫–∞–∑—á–∏–∫ –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–∫–∞–∑ –±–µ–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
**–†–µ—à–µ–Ω–∏–µ:** 
- –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –µ—Å–ª–∏ `executor_id IS NULL`
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É "Assign executor first"

### 8. –£–î–ê–õ–ï–ù–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å/–∑–∞–∫–∞–∑—á–∏–∫ —É–¥–∞–ª–µ–Ω –ø–æ—Å–ª–µ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
**–†–µ—à–µ–Ω–∏–µ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞—Ç—å –∑–∞–∫–∞–∑ ‚Üí `Completed`
- –ò–ª–∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ `Cancelled` —Å—Ç–∞—Ç—É—Å

### 9. –¢–ê–ô–ú–ê–£–¢–´
**–ü—Ä–æ–±–ª–µ–º–∞:** –û–¥–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞, –≤—Ç–æ—Ä–∞—è –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –º–µ—Å—è—Ü–∞–º–∏
**–†–µ—à–µ–Ω–∏–µ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π
- Cron job –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤

### 10. CONCURRENT COMPLETION
**–ü—Ä–æ–±–ª–µ–º–∞:** –û–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –Ω–∞–∂–∏–º–∞—é—Ç "Complete" –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
**–†–µ—à–µ–Ω–∏–µ:**
- Database transactions
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ –≤ –ø–∞–º—è—Ç–∏

## üîß –ù–ï–û–ë–•–û–î–ò–ú–´–ï –î–û–†–ê–ë–û–¢–ö–ò

### Backend:
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è `completed_by_*` 
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É `complete()` –∏ `completeByCustomer()`
3. ‚ùå –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ edge cases
4. ‚ùå –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ —Ç–∞–π–º–∞—É—Ç—É
5. ‚ùå –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –æ—Ç–º–µ–Ω—ã/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è

### Mobile:
1. ‚ùå –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å "–ñ–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ç..."
2. ‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ "Complete"
3. ‚ùå –û–±–Ω–æ–≤–∏—Ç—å UI –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ `AwaitingConfirmation`
4. ‚ùå –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (1/2, 2/2)

### Database:
1. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞
2. ‚ùå –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
3. ‚ùå Constraints –¥–ª—è data integrity

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´

**HIGH:** 
- –ü—Ä–æ–≤–µ—Ä–∫–∏ edge cases (–æ—Ç–º–µ–Ω–∞, –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ)
- UI –ø–æ–∫–∞–∑ —Å—Ç–∞—Ç—É—Å–∞ –≤–∑–∞–∏–º–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

**MEDIUM:**
- –¢–∞–π–º–∞—É—Ç—ã –∏ –∞–≤—Ç–æ–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- Concurrent completion handling

**LOW:**
- Performance optimization
- Advanced analytics
