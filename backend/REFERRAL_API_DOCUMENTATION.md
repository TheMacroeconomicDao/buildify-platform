# Referral System API Documentation

## –û–±–∑–æ—Ä

API –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å.

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ endpoints —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Bearer token (Laravel Sanctum).

```
Authorization: Bearer {token}
```

## Endpoints

### 1. –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤

**GET** `/api/referrals/my-stats`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª–∞–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

#### –û—Ç–≤–µ—Ç

```json
{
  "success": true,
  "result": {
    "referral_code": "ABC12345",
    "total_referrals": 5,
    "active_referrals": 3,
    "referral_balance": 1500,
    "referral_balance_aed": 15.00,
    "total_earnings": 2500,
    "total_earnings_aed": 25.00,
    "cashback_percentage": 10.0,
    "program_enabled": true
  }
}
```

#### –ü–æ–ª—è –æ—Ç–≤–µ—Ç–∞

- `referral_code` - –ø—Ä–æ–º–æ–∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `total_referrals` - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `active_referrals` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- `referral_balance` - –±–∞–ª–∞–Ω—Å –±–æ–Ω—É—Å–æ–≤ –≤ —Ü–µ–Ω—Ç–∞—Ö
- `referral_balance_aed` - –±–∞–ª–∞–Ω—Å –±–æ–Ω—É—Å–æ–≤ –≤ AED
- `total_earnings` - –æ–±—â–∞—è —Å—É–º–º–∞ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –±–æ–Ω—É—Å–æ–≤ –≤ —Ü–µ–Ω—Ç–∞—Ö
- `total_earnings_aed` - –æ–±—â–∞—è —Å—É–º–º–∞ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –±–æ–Ω—É—Å–æ–≤ –≤ AED
- `cashback_percentage` - —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –∫—ç—à–±—ç–∫–∞
- `program_enabled` - –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞

---

### 2. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤

**GET** `/api/referrals/my-referrals`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

- `page` (optional) - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1)
- `per_page` (optional) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20, –º–∞–∫—Å–∏–º—É–º: 100)

#### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```
GET /api/referrals/my-referrals?page=1&per_page=10
```

#### –û—Ç–≤–µ—Ç

```json
{
  "success": true,
  "result": {
    "referrals": [
      {
        "id": 1,
        "referred_user": {
          "id": 123,
          "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
          "email": "ivan@example.com"
        },
        "status": "active",
        "total_earned": 250,
        "total_earned_aed": 2.50,
        "registered_at": "2024-01-15T10:30:00.000000Z",
        "transactions_count": 3
      }
    ],
    "pagination": {
      "current_page": 1,
      "last_page": 2,
      "per_page": 10,
      "total": 15
    }
  }
}
```

---

### 3. –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**GET** `/api/referrals/my-code`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–º–æ–∫–æ–¥–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

#### –û—Ç–≤–µ—Ç

```json
{
  "success": true,
  "result": {
    "code": "ABC12345",
    "is_active": true,
    "created_at": "2024-01-01T12:00:00.000000Z",
    "share_url": "https://buildlify.com/referral/ABC12345",
    "share_text": "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ Buildlify –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–π –ø—Ä–æ–º–æ–∫–æ–¥ ABC12345 –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏! üéØ"
  }
}
```

---

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å

**POST** `/api/referrals/use-balance`

–°–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

```json
{
  "amount": 5.00,
  "reason": "subscription_payment"
}
```

#### –ü–æ–ª—è –∑–∞–ø—Ä–æ—Å–∞

- `amount` (required) - —Å—É–º–º–∞ –≤ AED –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è
- `reason` (optional) - –ø—Ä–∏—á–∏–Ω–∞ —Å–ø–∏—Å–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "service_payment")

#### –û—Ç–≤–µ—Ç (—É—Å–ø–µ—Ö)

```json
{
  "success": true,
  "message": "–†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å —É—Å–ø–µ—à–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω",
  "result": {
    "used_amount": 5.00,
    "remaining_balance": 10.50
  }
}
```

#### –û—Ç–≤–µ—Ç (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤)

```json
{
  "success": false,
  "message": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–º –±–∞–ª–∞–Ω—Å–µ"
}
```

---

### 5. –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥

**POST** `/api/referrals/validate-code`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

```json
{
  "code": "ABC12345"
}
```

#### –û—Ç–≤–µ—Ç (–≤–∞–ª–∏–¥–Ω—ã–π –∫–æ–¥)

```json
{
  "success": true,
  "result": {
    "valid": true,
    "referrer_name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
    "cashback_percentage": 10.0
  }
}
```

#### –û—Ç–≤–µ—Ç (–Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π –∫–æ–¥)

```json
{
  "success": false,
  "message": "–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω",
  "result": {
    "valid": false,
    "message": "–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω"
  }
}
```

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

- `400` - –ù–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
- `401` - –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `403` - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- `404` - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–µ `promo_code` –≤ –∑–∞–ø—Ä–æ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:

```json
{
  "name": "–ù–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
  "email": "user@example.com",
  "password": "password123!",
  "confirmed_password": "password123!",
  "phone": "+971501234567",
  "type": 0,
  "promo_code": "ABC12345",
  "work_types": ["plumbing", "electrical"]
}
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞
- –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ª—é–±–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥
- –ü—Ä–æ–º–æ–∫–æ–¥ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 8 —Å–∏–º–≤–æ–ª–æ–≤ (–±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã)
- –ò—Å–∫–ª—é—á–µ–Ω—ã –ø–æ—Ö–æ–∂–∏–µ —Å–∏–º–≤–æ–ª—ã (0, O, 1, I) –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—É—Ç–∞–Ω–∏—Ü—ã

### –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∫—ç—à–±—ç–∫–∞
- –ö—ç—à–±—ç–∫ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ—à–µ–ª—å–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–º
- –ü—Ä–æ—Ü–µ–Ω—Ç –∫—ç—à–±—ç–∫–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10%)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –∫—ç—à–±—ç–∫–∞: 1.00 AED
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫—ç—à–±—ç–∫ –∑–∞ –æ–¥–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é: 100.00 AED

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤
- –°—á—ë—Ç—á–∏–∫–∏ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞—Ä–∞–±–æ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ –∫—ç—à–±—ç–∫–∞

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:

- `cashback_percentage` - –ø—Ä–æ—Ü–µ–Ω—Ç –∫—ç—à–±—ç–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10%)
- `min_cashback_amount` - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –¥–ª—è –∫—ç—à–±—ç–∫–∞ –≤ —Ü–µ–Ω—Ç–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 100)
- `max_cashback_per_transaction` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫—ç—à–±—ç–∫ –∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ —Ü–µ–Ω—Ç–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10000)
- `program_enabled` - –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: true)
- `referral_active_days` - —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–≤—è–∑–∏ –≤ –¥–Ω—è—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 365)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥
- –¢–æ–ª—å–∫–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª–∞–º–∏
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–ª–∞–Ω—Å–æ–º –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–∞–∫—Ä—É—Ç–∫–∏ —á–µ—Ä–µ–∑ –ª–∏–º–∏—Ç—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é
- –ê—É–¥–∏—Ç –≤—Å–µ—Ö —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
